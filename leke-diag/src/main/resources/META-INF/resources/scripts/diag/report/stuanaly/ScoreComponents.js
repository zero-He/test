define(function (require, exports, module) {
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),React=require("common/react/react"),_require=require("common/react/react-utils"),cx=_require.cx,ReactChart=require("common/react/ReactChart"),ScoreChartConfig=require("./ScoreChartConfig"),ScoreReportQuery=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={typeIdx:0,zoneIdx:0,cycleId:e.types[0].list[0].id},n.handleChangeCycle=n.handleChangeCycle.bind(n),n.handleChangeZone=n.handleChangeZone.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"handleClickType",value:function(e){if(this.state.typeIdx!=e){var t=this.props.types[e].list[0].id;this.setState({typeIdx:e,cycleId:t}),this.handleChange(this.state.zoneIdx,t)}}},{key:"handleChangeCycle",value:function(e){var t=parseInt(e.target.value);this.setState({cycleId:t}),this.handleChange(this.state.zoneIdx,t)}},{key:"handleChangeZone",value:function(e){var t=parseInt(e.target.value);this.setState({zoneIdx:t}),this.handleChange(t,this.state.cycleId)}},{key:"handleChange",value:function(e,t){if(this.props.onChange){var n=this.props.zones[e];console.log("condition: "+n.classId+", "+n.subjectId+", "+t),this.props.onChange(n.classId,n.subjectId,t)}}},{key:"componentDidMount",value:function(){var e=this.state,t=e.zoneIdx,n=e.cycleId;this.handleChange(t,n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.typeIdx,a=t.cycleId,r=this.props,c=r.types,s=r.zones,l=r.hideZone;return React.createElement("div",{className:"m-search-box"},React.createElement("div",{className:"f-fl"},React.createElement("ul",null,c.map(function(t,a){var r=e.handleClickType.bind(e,a);return React.createElement("li",{key:a,className:cx({active:a==n})},React.createElement("a",{onClick:r},t.label))}))),React.createElement("div",{className:"f-fr"},React.createElement("select",{className:"u-select u-select-lg",onChange:this.handleChangeCycle,value:a},c[n].list.map(function(e,t){return React.createElement("option",{key:t,value:e.id},e.label)})),React.createElement("select",{className:cx("u-select u-select-lg",{"f-dn":l||!1}),onChange:this.handleChangeZone},s.map(function(e,t){return React.createElement("option",{key:t,value:t},e.label)}))))}}]),t}(React.Component),ScoreTrendChart=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={idx:0},n}return _inherits(t,e),_createClass(t,[{key:"handleChangeType",value:function(e){this.setState({idx:e})}},{key:"renderTabs",value:function(e){if(!(e&&e.length>1))return null;var t=this,n=this.state.idx;return React.createElement("div",{className:"maps-tab"},React.createElement("ul",null,e.map(function(e,a){return React.createElement("li",{key:a,className:cx({active:n==a}),onClick:t.handleChangeType.bind(t,a)},e.label)})))}},{key:"render",value:function(){var e=this,t=this.props.trends,n=t[this.state.idx],a=n.names,r=n.selfs,c=n.klass;return React.createElement("div",{className:"maps"},e.renderTabs(t),React.createElement(ReactChart,{className:"single",option:ScoreChartConfig.buildScoreTrend(a,r,c)}))}}]),t}(React.Component);module.exports={ScoreReportQuery:ScoreReportQuery,ScoreTrendChart:ScoreTrendChart};
});