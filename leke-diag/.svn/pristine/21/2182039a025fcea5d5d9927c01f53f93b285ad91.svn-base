define(function (require, exports, module) {
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),React=require("common/react/react"),ReactChart=require("common/react/ReactChart"),ReactPieChart=require("../common/ReactPieChart"),_require=require("../utils/number"),toFixed=_require.toFixed,toRate=_require.toRate,Section=require("../common/Section"),AnalyseResult=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.view;return null==e?React.createElement("div",{className:"m-mask"},React.createElement("div",{className:"con"},React.createElement("i",null),React.createElement("div",null,"数据加载中"))):0==e.success?React.createElement("div",{className:"m-tips"},React.createElement("i",null),React.createElement("span",null,e.message)):React.createElement("div",{className:"c-analayse"},React.createElement(SummaryInfo,{id:"ach_summary",view:e}),React.createElement(BeikeInfo,{id:"ach_beike",view:e}),React.createElement(EvaluateInfo,{id:"ach_evaluate",view:e}),React.createElement(InteractInfo,{id:"ach_interact",view:e}),React.createElement(WorkFinishInfo,{id:"ach_workfinish",view:e}),React.createElement(AttendInfo,{id:"ach_attend",view:e}))}}]),t}(React.Component),SummaryInfo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.view,a=(e.actions,e.userName,t.beikeInfo),n=t.evalInfo,r=t.attendInfo,c=t.interactInfo,s=t.workInfo,l=toRate(a.beikeNum,a.totalNum),i=toFixed((n.interactionScore+n.professionalScore+n.rhythmScore)/3,1),o=s.totalDtlNum,m=s.checkDtlNum,u='敬爱的<span class="fc-green">'+t.userName+"</span>老师：",p='在此期间，您共上课<span class="fc-green">'+r.realNum+'</span>堂，备课<span class="fc-green">'+a.beikeNum+"</span>堂，";return p+='备课率为<span class="fc-green">'+l+'%</span>，课堂评价得分为<span class="fc-green">'+i+"</span>分，",p+='课堂互动<span class="fc-green">'+c.totalNum+"</span>次，",p+='批改作业<span class="fc-green">'+m+'</span>人份，批改率<span class="fc-green">'+toRate(m,o)+"%</span>，",p+="良好的教学行为习惯是保证教学质量的基础，老师，您辛苦了。",React.createElement("section",{id:this.props.id,className:"c-paragraph"},React.createElement("section",{className:"title",dangerouslySetInnerHTML:{__html:u}}),React.createElement("section",{className:"con",dangerouslySetInnerHTML:{__html:p}}))}}]),t}(React.Component),BeikeInfo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buildBarOptions",value:function(e){return{grid:{top:10,left:10,right:10,bottom:10,containLabel:!0},color:["#619eed"],tooltip:{trigger:"axis",formatter:"有备{b}课堂数: {c}"},xAxis:[{type:"category",data:["课件","微课","试卷"]}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"40%",data:e}]}}},{key:"render",value:function(){var e=this.props.view.beikeInfo,t=e.totalNum,a=e.beikeNum,n=e.resType1,r=e.resType2,c=e.resType3,s=[{value:a,name:"有备课"},{value:t-a,name:"无备课"}],l='共需备课<span class="green-txt">'+t+"</span>堂。";return React.createElement(Section,{id:this.props.id,title:"备课"},React.createElement("div",{className:"c-layout"},React.createElement("div",{className:"left",style:{width:"40%"}},React.createElement(ReactPieChart,{datas:s,summary:l,unit:"堂",vertical:!0})),React.createElement("div",{className:"right",style:{width:"50%"}},React.createElement(ReactChart,{className:"maps",option:this.buildBarOptions([n,r,c])}))))}}]),t}(React.Component),EvaluateInfo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buildLineOptions",value:function(e){return{color:["#76b3a1"],title:{text:"课堂评价得分走势",left:"center",textStyle:{fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{b}：{c}分"},xAxis:{type:"category",boundaryGap:!1,data:e.map(function(e){return e.name.replace(/（\S*）/,"")})},yAxis:{type:"value"},series:[{type:"line",areaStyle:{normal:{}},data:e.map(function(e){return e.value})}]}}},{key:"render",value:function(){var e=this.props.view,t=e.interactInfo,a=t.flowerNum,n=t.prevFlowerNum,r=e.evalInfo,c=r.goodCount,s=r.interactionScore,l=r.professionalScore,i=r.rhythmScore,o=r.userCount,m=r.trends,u=toFixed((s+l+i)/3,1);return React.createElement(Section,{id:this.props.id,title:"课堂评价"},React.createElement("div",{className:"con"},React.createElement("div",{className:"m-evaluation"},React.createElement("div",{className:"ev-scores"},React.createElement("div",{className:"sc-sum"},React.createElement("p",null,React.createElement("span",null,u),"分"),React.createElement("div",{className:"stars"},React.createElement("em",null,React.createElement("i",{style:{width:toRate(u,5)+"%"}})))),React.createElement("div",{className:"sc-items"},React.createElement("div",{className:"classify"},"教学效果：",React.createElement("div",{className:"stars"},React.createElement("em",null,React.createElement("i",{style:{width:toRate(l,5)+"%"}}))),React.createElement("span",{className:"fc-orange"},l)),React.createElement("div",{className:"classify"},"教学态度：",React.createElement("div",{className:"stars"},React.createElement("em",null,React.createElement("i",{style:{width:toRate(i,5)+"%"}}))),React.createElement("span",{className:"fc-orange"},i)),React.createElement("div",{className:"classify"},"课堂互动：",React.createElement("div",{className:"stars"},React.createElement("em",null,React.createElement("i",{style:{width:toRate(s,5)+"%"}}))),React.createElement("span",{className:"fc-orange"},s)))),React.createElement("div",{className:"ev-data"},React.createElement("div",{className:"data-con"},React.createElement("div",{className:"describ"},React.createElement("div",null,"好评率："),React.createElement("p",null,React.createElement("span",null,o),"个评价")),React.createElement("div",{className:"data"},toRate(c,o),"%")),React.createElement("div",{className:"data-con"},React.createElement("div",{className:"describ"},React.createElement("div",null,"收到鲜花："),React.createElement("p",null,"上周期：",React.createElement("span",null,n))),React.createElement("div",{className:"data"},a)))),React.createElement(ReactChart,{className:"maps",option:this.buildLineOptions(m)})))}}]),t}(React.Component),InteractInfo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.view,t=e.interactInfo,a=t.calledNum,n=t.discuNum,r=t.quickNum,c=t.examNum,s=t.authedNum,l=t.delayNum,i=t.totalNum,o=t.prevTotalNum,m=[{value:a,name:"点名"},{value:n,name:"分组讨论"},{value:r,name:"快速问答"},{value:c,name:"随堂作业"},{value:s,name:"授权"},{value:l,name:"拖堂"}],u='共上课<span class="green-txt">'+e.attendInfo.realNum+'</span>堂，发起课堂互动<span class="green-txt">'+i+'</span>次，上周期<span class="green-txt">'+o+"</span>次。";return React.createElement(Section,{id:this.props.id,title:"课堂互动"},React.createElement(ReactPieChart,{datas:m,summary:u,unit:"次"}))}}]),t}(React.Component),WorkFinishInfo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.view.workInfo,t=e.totalHwNum,a=e.checkHwNum,n=e.partHwNum,r=e.unchkHwNum,c=e.totalDtlNum,s=e.checkDtlNum,l=toRate(s,c),i=[{value:a,name:"全部批改"},{value:n,name:"部分批改"},{value:r,name:"未批改"}],o='共布置班级作业<span class="green-txt">'+t+'</span>份（应批改<span class="green-txt">'+c+"</span>人份，";return o+='实批改<span class="green-txt">'+s+'</span>人份，批改率<span class="green-txt">'+l+"%</span>）。",React.createElement(Section,{id:this.props.id,title:"作业批改",help:Leke.domain.staticServerName+"/pages/help-center/diag/zy-pg.html"},React.createElement(ReactPieChart,{datas:i,summary:o,unit:"份"}))}}]),t}(React.Component),AttendInfo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.view.attendInfo,t=e.lessonNum,a=e.realNum,n=e.normalNum,r=e.belateNum,c=e.earlyNum,s=e.exceptNum,l=e.absentNum,i=[{value:n,name:"全勤"},{value:r,name:"迟到"},{value:c,name:"早退"},{value:s,name:"迟到且早退"},{value:l,name:"缺勤"}],o=["#83cf0b","#619eed","#70cfff","#ffd270","#ff6d6e"],m=toRate(a,t),u='应上课<span class="green-txt">'+t+'</span>堂，实上<span class="green-txt">'+a+'</span>堂，上课率<span class="green-txt">'+m+"%</span>。";return React.createElement(Section,{id:this.props.id,title:"考勤",help:Leke.domain.staticServerName+"/pages/help-center/diag/kq-gz.html"},React.createElement(ReactPieChart,{datas:i,summary:u,color:o,unit:"堂"}))}}]),t}(React.Component);module.exports=AnalyseResult;
});