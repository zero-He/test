!function o(t,n,e){function s(d,r){if(!n[d]){if(!t[d]){var l="function"==typeof require&&require;if(!r&&l)return l(d,!0);if(i)return i(d,!0);var a=new Error("Cannot find module '"+d+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[d]={exports:{}};t[d][0].call(c.exports,function(o){var n=t[d][1][o];return s(n?n:o)},c,c.exports,o,t,n,e)}return n[d].exports}for(var i="function"==typeof require&&require,d=0;d<e.length;d++)s(e[d]);return s}({1:[function(o,t,n){"use strict";!function(o){function t(o){o.touches||(o.touches=o.originalEvent.touches)}function n(o,t){t._startY=o.touches[0].pageY,t.touchScrollTop=t.$scrollArea.scrollTop()}function e(t,n){n._curY=t.touches[0].pageY,n._moveY=n._curY-n._startY,n._moveY>0?n.direction="down":n._moveY<0&&(n.direction="up");var e=Math.abs(n._moveY);""!=n.opts.loadUpFn&&n.touchScrollTop<=0&&"down"==n.direction&&!n.isLockUp&&(t.preventDefault(),n.$domUp=o("."+n.opts.domUp.domClass),n.upInsertDOM||(n.$element.prepend('<div class="'+n.opts.domUp.domClass+'"></div>'),n.upInsertDOM=!0),l(n.$domUp,0),e<=n.opts.distance?(n._offsetY=e,n.$domUp.html(n.opts.domUp.domRefresh)):e>n.opts.distance&&e<=2*n.opts.distance?(n._offsetY=n.opts.distance+.5*(e-n.opts.distance),n.$domUp.html(n.opts.domUp.domUpdate)):n._offsetY=n.opts.distance+.5*n.opts.distance+.2*(e-2*n.opts.distance),n.$domUp.css({height:n._offsetY}))}function s(t){var n=Math.abs(t._moveY);""!=t.opts.loadUpFn&&t.touchScrollTop<=0&&"down"==t.direction&&!t.isLockUp&&(l(t.$domUp,300),n>t.opts.distance?(t.$domUp.css({height:t.$domUp.children().height()}),t.$domUp.html(t.opts.domUp.domLoad),t.loading=!0,t.opts.loadUpFn(t)):t.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){t.upInsertDOM=!1,o(this).remove()}),t._moveY=0)}function i(o){o.opts.autoLoad&&o._scrollContentHeight-o._threshold<=o._scrollWindowHeight&&r(o)}function d(o){o.opts.scrollArea==a?o._scrollContentHeight=h.height():o._scrollContentHeight=o.$element[0].scrollHeight}function r(o){o.direction="up",o.$domDown.html(o.opts.domDown.domLoad),o.loading=!0,o.opts.loadDownFn(o)}function l(o,t){o.css({"-webkit-transition":"all "+t+"ms",transition:"all "+t+"ms"})}var a=window,c=document,p=o(a),h=o(c);o.fn.dropload=function(o){return new m(this,o)};var m=function(o,t){var n=this;n.$element=o,n.upInsertDOM=!1,n.loading=!1,n.isLockUp=!1,n.isLockDown=!1,n.isData=!0,n._scrollTop=0,n._threshold=0,n.init(t)};m.prototype.init=function(d){var l=this;l.opts=o.extend(!0,{},{scrollArea:l.$element,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh">↓下拉刷新</div>',domUpdate:'<div class="dropload-update">↑释放更新</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>',domNoData:'<div class="dropload-noData">没有更多数据了</div>'},autoLoad:!0,distance:50,threshold:"",loadUpFn:"",loadDownFn:""},d),""!=l.opts.loadDownFn&&(l.$domDown=o("."+l.opts.domDown.domClass).html(l.opts.domDown.domRefresh),l.$domDown.length||(l.$element.append('<div class="'+l.opts.domDown.domClass+'">'+l.opts.domDown.domRefresh+"</div>"),l.$domDown=o("."+l.opts.domDown.domClass))),l.$domDown&&""===l.opts.threshold?l._threshold=Math.floor(1*l.$domDown.height()/3):l._threshold=l.opts.threshold,l.opts.scrollArea==a?(l.$scrollArea=p,l._scrollContentHeight=h.height(),l._scrollWindowHeight=c.documentElement.clientHeight):(l.$scrollArea=l.opts.scrollArea,l._scrollContentHeight=l.$element[0].scrollHeight,l._scrollWindowHeight=l.$element.height()),i(l),p.on("resize",function(){l.opts.scrollArea==a?l._scrollWindowHeight=a.innerHeight:l._scrollWindowHeight=l.$element.height()}),l.$element.on("touchstart",function(o){l.loading||(t(o),n(o,l))}),l.$element.on("touchmove",function(o){l.loading||(t(o),e(o,l))}),l.$element.on("touchend",function(){l.loading||s(l)}),l.$scrollArea.on("scroll",function(){l._scrollTop=l.$scrollArea.scrollTop(),""!=l.opts.loadDownFn&&!l.loading&&!l.isLockDown&&l._scrollContentHeight-l._threshold<=l._scrollWindowHeight+l._scrollTop&&r(l)})},m.prototype.lock=function(o){var t=this;void 0===o?"up"==t.direction?t.isLockDown=!0:"down"==t.direction?t.isLockUp=!0:(t.isLockUp=!0,t.isLockDown=!0):"up"==o?t.isLockUp=!0:"down"==o&&(t.isLockDown=!0,t.direction="up")},m.prototype.unlock=function(){var o=this;o.isLockUp=!1,o.isLockDown=!1,o.direction="up"},m.prototype.noData=function(o){var t=this;void 0===o||1==o?t.isData=!1:0==o&&(t.isData=!0)},m.prototype.resetload=function(){var t=this;"down"==t.direction&&t.upInsertDOM?t.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){t.loading=!1,t.upInsertDOM=!1,o(this).remove(),d(t)}):"up"==t.direction&&(t.loading=!1,t.isData?(t.$domDown.html(t.opts.domDown.domRefresh),d(t),i(t)):t.$domDown.html(t.opts.domDown.domNoData))}}(window.Zepto||window.jQuery)},{}]},{},[1]);
//# sourceMappingURL=dropload.bundle.js.map
